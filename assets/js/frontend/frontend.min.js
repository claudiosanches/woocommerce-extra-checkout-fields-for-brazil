jQuery(function(d){var e={mask_patterns:{zip:{BR:"ddddd-ddd",DK:"dddd",FR:"ddddd",DE:"ddddd",PT:"dddd-ddd",ES:"ddddd",CH:"dddd",GB:"aadd daa",US:"ddddd-dddd"},phone:{BR:[12,"+55 (dd) ddddd-ddd?d","+55 (dd) dddd-dddd?d"],FR:"+33 d dd dd dd dd",DE:"+49 (ddd) dddddd?ddd",PT:"+351 (ddd) dddd ddd?dd",ES:[12,"+34 (dd) ddddd-ddd?dd","+34 (dd) dddd-ddd?dd"],CH:"+41 dd ddd dd dd?dd",GB:[12,"+44 (dddd) dddd ddd?dd","+44 (dddd) ddd ddd?dd"],US:"+1 (ddd) ddddddd?dd"},date:{BR:"dd/dd/dddd",DK:"dddd-dd-dd",FR:"dd-dd-dddd",DE:"dd.dd.dddd",PT:"dd/dd/dddd",ES:"dd/dd/dddd",CH:"dd.dd.dddd",GB:"dd/dd/dddd",US:"dd/dd/dddd"}},init:function(){document.__frontend_actions=this,d.mask.definitions[9]="",d.mask.definitions.d="[0-9]",d(document.body).on("country_to_state_changing",this.country_to_state_changing),"0"!==wcbcf_public_params.person_type&&this.person_type_fields(),"yes"===wcbcf_public_params.maskedinput&&this.masks(),"yes"===wcbcf_public_params.mailcheck&&this.emailCheck(),"yes"===wcbcf_public_params.addresscomplete&&(this.addressAutoComplete("billing"),this.addressAutoCompleteOnChange("billing"),this.addressAutoComplete("shipping"),this.addressAutoCompleteOnChange("shipping"))},country_to_state_changing:function(){"yes"===wcbcf_public_params.maskedinput&&document.__frontend_actions.masks(),d("#billing_state_field label").html(wcbcf_public_params.state+' <abbr class="required" title="'+wcbcf_public_params.required+'">*</abbr>'),d("#billing_postcode_field").insertAfter("#billing_country_field"),d("#shipping_state_field").length&&(d("#shipping_state_field label").html(wcbcf_public_params.state+' <abbr class="required" title="'+wcbcf_public_params.required+'">*</abbr>'),d("#shipping_postcode_field").insertAfter("#shipping_country_field"))},person_type_fields:function(){"no"===wcbcf_public_params.only_brazil?(d(".person-type-field").addClass("validate-required"),d(".person-type-field label").append(' <abbr class="required" title="'+wcbcf_public_params.required+'">*</abbr>')):d("#billing_country").on("change",function(){var e=d(this).val();"BR"===e?(d(".person-type-field").addClass("validate-required"),d(".person-type-field label").append(' <abbr class="required" title="'+wcbcf_public_params.required+'">*</abbr>')):(d(".person-type-field").removeClass("validate-required"),d(".person-type-field label abbr").remove())}).change(),"1"===wcbcf_public_params.person_type&&d("#billing_persontype").on("change",function(){var e=d(this).val();d("#billing_cpf_field").hide(),d("#billing_rg_field").hide(),d("#billing_company_field").hide(),d("#billing_cnpj_field").hide(),d("#billing_ie_field").hide(),"1"===e&&(d("#billing_cpf_field").show(),d("#billing_rg_field").show()),"2"===e&&(d("#billing_company_field").show(),d("#billing_cnpj_field").show(),d("#billing_ie_field").show())}).change()},masks:function(){var e=jQuery("#billing_country").val();d("#billing_cpf, #credit-card-cpf").unmask().mask("ddd.ddd.ddd-dd"),d("#billing_cnpj").unmask().mask("dd.ddd.ddd/dddd-dd");var i=this;d("#billing_phone, #billing_cellphone, #credit-card-phone").off("focusout").focusout(function(){var e,t;t=d(this),t.unmask(),e=t.val().replace(/\D/g,""),t.mask(i.getPhoneMask(jQuery("#billing_country").val(),e.length))}).trigger("focusout"),d("#billing_birthdate").unmask().mask(this.getDateMask(e)),d("#billing_postcode").unmask().mask(this.getPostalCodeMask(e)),d("#shipping_postcode").unmask().mask(this.getPostalCodeMask(e))},emailCheck:function(){d("#wcbcf-mailsuggest").length<1&&d("#billing_email").after('<div id="wcbcf-mailsuggest"></div>'),d("#billing_email").on("blur",function(){d("#wcbcf-mailsuggest").html(""),d(this).mailcheck({suggested:function(e,i){d("#wcbcf-mailsuggest").html("VocÃª quis dizer: "+i.full+"?")}})}),d("#wcbcf-mailsuggest").css({color:"#c00",fontSize:"small"})},addressAutoComplete:function(e){if(d("#"+e+"_postcode").length){var i=d("#"+e+"_postcode").val().replace(".","").replace("-",""),t=d("#"+e+"_country").val(),a=d("#"+e+"_address_1").val();""!==i&&8===i.length&&"BR"===t&&0===a.length&&d.ajax({type:"GET",url:"//correiosapi.apphb.com/cep/"+i,dataType:"jsonp",crossDomain:!0,contentType:"application/json",success:function(i){""!==i.tipoDeLogradouro?d("#"+e+"_address_1").val(i.tipoDeLogradouro+" "+i.logradouro).change():d("#"+e+"_address_1").val(i.logradouro).change(),d("#"+e+"_neighborhood").val(i.bairro).change(),d("#"+e+"_city").val(i.cidade).change(),d("#"+e+"_state option:selected").attr("selected",!1).change(),d("#"+e+'_state option[value="'+i.estado+'"]').attr("selected","selected").change(),d("#"+e+"_state").trigger("liszt:updated").trigger("chosen:updated")}})}},addressAutoCompleteOnChange:function(i){d("#"+i+"_postcode").on("blur",function(){e.addressAutoComplete(i)})},getPhoneMask:function(d,e){var i=e||0,t=this.mask_patterns.phone[d];return t&&t.constructor===Array&&(t=i>t[0]?t[1]:t[2]),t||""},getDateMask:function(d){var e=this.mask_patterns.date[d];return e||""},getPostalCodeMask:function(d){var e=this.mask_patterns.zip[d];return e||""}};e.init()});